# 開発ワークフロー

このファイルは、rustfeedプロジェクトの開発ワークフローを定義します。

## ブランチ戦略

| ブランチ | 用途 |
|---------|------|
| `main` | 安定版。リリース可能な状態を維持 |
| `feature/*` | 新機能開発（例: `feature/export-opml`） |
| `fix/*` | バグ修正（例: `fix/timeout-error`） |
| `refactor/*` | リファクタリング |
| `docs/*` | ドキュメントのみの変更 |

## コミットメッセージ規約（日本語）

### 形式
```
[種別] 変更内容の要約

詳細な説明（任意）
```

### 種別一覧

| 種別 | 用途 | 例 |
|------|------|-----|
| 機能追加 | 新しい機能の追加 | `[機能追加] OPMLエクスポート機能` |
| 改善 | 既存機能の改善 | `[改善] 記事一覧の表示速度向上` |
| 修正 | バグ修正 | `[修正] フィード取得時のタイムアウトエラー` |
| リファクタ | コード整理（機能変更なし） | `[リファクタ] データベース層の構造整理` |
| ドキュメント | ドキュメントのみの変更 | `[ドキュメント] README更新` |
| テスト | テストの追加・修正 | `[テスト] フィード取得のテスト追加` |
| 設定 | 設定ファイルの変更 | `[設定] Cargo.toml依存関係更新` |

### Claude Codeによるコミット

Claude Codeがコミットする場合、末尾に以下を追加：

```
[種別] 変更内容の要約

詳細な説明

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
```

## PR作成ルール

### タイトル
コミットメッセージと同様の形式

### 本文テンプレート
```markdown
## 概要
変更内容の要約

## 変更点
- 変更1
- 変更2

## テスト方法
1. テスト手順1
2. テスト手順2

## 関連Issue
- #123
```

## テスト要件

### 新機能追加時
- ユニットテストを追加
- 主要なパスをカバー

### バグ修正時
- 修正を検証するテストを追加
- 既存テストが通ることを確認

### テスト実行
```bash
# 全テスト実行
cargo test

# 特定のテスト実行
cargo test test_fetch_feed

# ドキュメントテスト
cargo test --doc
```

## リリース手順

1. バージョン番号を更新（`Cargo.toml`）
2. CHANGELOGを更新
3. コミット: `[リリース] v0.x.x`
4. タグ作成: `git tag v0.x.x`
5. プッシュ: `git push && git push --tags`

## コードレビュー

### レビュー観点
- 機能が正しく実装されているか
- エラーハンドリングが適切か
- テストが十分か
- ドキュメントが更新されているか
- コードスタイルに従っているか
